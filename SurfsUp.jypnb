{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "%matplotlib inline\n",
    "from matplotlib import style\n",
    "style.use('fivethirtyeight')\n",
    "import matplotlib.pyplot as plt\n",
    "import matplotlib.dates as mdates\n",
    "from flask import Flask, jsonify"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "import datetime as dt"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Reflect Tables into SQLAlchemy ORM"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Python SQL toolkit and Object Relational Mapper\n",
    "import sqlalchemy\n",
    "from sqlalchemy.ext.automap import automap_base\n",
    "from sqlalchemy.orm import Session\n",
    "from sqlalchemy import create_engine, inspect, func"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "engine = create_engine(\"sqlite:///Resources/hawaii.sqlite\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "inspector = inspect(engine)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "# reflect an existing database into a new model\n",
    "Base = automap_base()\n",
    "# reflect the tables\n",
    "Base.prepare(engine, reflect=True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['measurement', 'station']"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# We can view all of the classes that automap found\n",
    "Base.classes.keys()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Save references to each table\n",
    "Measurement = Base.classes.measurement\n",
    "Station = Base.classes.station"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Create our session (link) from Python to the DB\n",
    "session = Session(engine)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Exploratory Climate Analysis"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "id INTEGER\n",
      "station TEXT\n",
      "date TEXT\n",
      "prcp FLOAT\n",
      "tobs FLOAT\n"
     ]
    }
   ],
   "source": [
    "# Get columns\n",
    "inspector.get_table_names()\n",
    "columns = inspector.get_columns('measurement')\n",
    "for column in columns:\n",
    "    print(column[\"name\"], column[\"type\"])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    },
    {
     "data": {
      "text/plain": [
       "<Figure size 432x288 with 0 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Design a query to retrieve the last 12 months of precipitation data and plot the results\n",
    "def year_ago(date_str):\n",
    "    new_date = datetime.strftime((datetime.strptime(date_str,'%Y-%m-%d') - dt.timedelta(days=365)).date(),'%Y-%m-%d')\n",
    "    return new_date\n",
    "\n",
    "# Calculate the date 1 year ago from the last data point in the database\n",
    "sel = [Measurement.date]\n",
    "result = session.query(*sel).order_by(Measurement.date.desc()).first()\n",
    "last_date = result[0]\n",
    "last_date\n",
    "\n",
    "# Perform a query to retrieve the data and precipitation scores\n",
    "last_year = session.query(Measurement.date, Measurement.prcp).\\\n",
    "            filter(Measurement.date >= '2016-08-23').all()\n",
    "last_year\n",
    "\n",
    "# Save the query results as a Pandas DataFrame and set the index to the date column\n",
    "last_year_df = pd.DataFrame(last_year)\n",
    "last_year_df = last_year_df.set_index(\"date\")\n",
    "last_year_df.head()\n",
    "# Sort the dataframe by date\n",
    "\n",
    "# Use Pandas Plotting with Matplotlib to plot the data\n",
    "last_year_df.plot(x_compat = True)\n",
    "plt.legend(last_year_df,loc=2)\n",
    "plt.savefig(\"Images/Precipitation Plot.png\")\n",
    "plt.show()\n",
    "plt.tight_layout()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>prcp</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>2021.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>0.177279</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>0.461190</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>0.020000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>0.130000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>6.700000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "              prcp\n",
       "count  2021.000000\n",
       "mean      0.177279\n",
       "std       0.461190\n",
       "min       0.000000\n",
       "25%       0.000000\n",
       "50%       0.020000\n",
       "75%       0.130000\n",
       "max       6.700000"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Use Pandas to calcualte the summary statistics for the precipitation data\n",
    "last_year_df.describe()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "id INTEGER\n",
      "station TEXT\n",
      "name TEXT\n",
      "latitude FLOAT\n",
      "longitude FLOAT\n",
      "elevation FLOAT\n"
     ]
    }
   ],
   "source": [
    "#Inspect the station table \n",
    "columns = inspector.get_columns('station')\n",
    "for column in columns:\n",
    "    print(column[\"name\"], column[\"type\"])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "9"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Design a query to show how many stations are available in this dataset?\n",
    "session.query(Station.id).count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[('USC00519281', 2772),\n",
       " ('USC00519397', 2724),\n",
       " ('USC00513117', 2709),\n",
       " ('USC00519523', 2669),\n",
       " ('USC00516128', 2612),\n",
       " ('USC00514830', 2202),\n",
       " ('USC00511918', 1979),\n",
       " ('USC00517948', 1372),\n",
       " ('USC00518838', 511)]"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# What are the most active stations? (i.e. what stations have the most rows)?\n",
    "# List the stations and the counts in descending order.\n",
    "sel = [Station.station, func.count(Measurement.station)]\n",
    "session.query(*sel).filter(Station.station == Measurement.station).group_by(Station.station).\\\n",
    "                            order_by(func.count(Measurement.station).desc()).all()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[('USC00519281', 2772),\n",
       " ('USC00519397', 2724),\n",
       " ('USC00513117', 2709),\n",
       " ('USC00519523', 2669),\n",
       " ('USC00516128', 2612),\n",
       " ('USC00514830', 2202),\n",
       " ('USC00511918', 1979),\n",
       " ('USC00517948', 1372),\n",
       " ('USC00518838', 511)]"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "most_active_stations = engine.execute(\"SELECT station.station, COUNT(measurement.station) FROM station INNER JOIN \\\n",
    "               measurement ON station.station = measurement.station GROUP BY station.station ORDER BY \\\n",
    "               COUNT(measurement.station) DESC\").fetchall()\n",
    "most_active_stations"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "most_active_station = most_active_stations[0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[(54.0, 85.0, 71.66378066378067)]"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Using the station id from the previous query, calculate the lowest temperature recorded, \n",
    "# highest temperature recorded, and average temperature of the most active station?\n",
    "sel = [func.min(Measurement.tobs), func.max(Measurement.tobs), func.avg(Measurement.tobs)]\n",
    "session.query(*sel).filter(Measurement.station == most_active_station[0]).all()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Query to find the last data point in the database \n",
    "last_date = session.query(Measurement.date).order_by(Measurement.date.desc()).first()\n",
    "#print(last_date)\n",
    "\n",
    "# Calculate the date 1 year ago from the last data point in the database\n",
    "query_date = dt.date(2017, 8, 23) - dt.timedelta(days=365)\n",
    "#print(query_date)\n",
    "\n",
    "# Choose the station with the highest number of temperature observations.\n",
    "most_active_station = most_active_stations[0][0]\n",
    "\n",
    "# Query the last 12 months of temperature observation data for this station\n",
    "last_year = session.query(Measurement.date, Measurement.tobs).\\\n",
    "            filter(Measurement.date >= str(query_date), Measurement.station == most_active_station).all()\n",
    "#print(last_year)\n",
    "\n",
    "# Plot the results as a histogram\n",
    "last_year_df = pd.DataFrame(last_year)\n",
    "last_year_df = last_year_df.set_index(\"date\")\n",
    "last_year_df.head()\n",
    "\n",
    "axarr = pd.DataFrame.hist(data = last_year_df, column = \"tobs\", bins = 12)\n",
    "for ax in axarr.flatten():\n",
    "    ax.set_title(\"Temperature Distribution\")\n",
    "    ax.set_ylabel(\"Frequency\")\n",
    "\n",
    "plt.legend(last_year_df,loc=1)\n",
    "plt.savefig(\"Images/Temperature Distribution Histogram.png\")\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[(62.0, 69.57142857142857, 74.0)]\n"
     ]
    }
   ],
   "source": [
    "# This function called `calc_temps` will accept start date and end date in the format '%Y-%m-%d' \n",
    "# and return the minimum, average, and maximum temperatures for that range of dates\n",
    "def calc_temps(start_date, end_date):\n",
    "    \"\"\"TMIN, TAVG, and TMAX for a list of dates.\n",
    "    \n",
    "    Args:\n",
    "        start_date (string): A date string in the format %Y-%m-%d\n",
    "        end_date (string): A date string in the format %Y-%m-%d\n",
    "        \n",
    "    Returns:\n",
    "        TMIN, TAVE, and TMAX\n",
    "    \"\"\"\n",
    "    \n",
    "    return session.query(func.min(Measurement.tobs), func.avg(Measurement.tobs), func.max(Measurement.tobs)).\\\n",
    "        filter(Measurement.date >= start_date).filter(Measurement.date <= end_date).all()\n",
    "\n",
    "# function usage example\n",
    "print(calc_temps('2012-02-28', '2012-03-05'))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[(58.0, 74.59058295964125, 87.0)]"
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Use your previous function `calc_temps` to calculate the tmin, tavg, and tmax \n",
    "# for your trip using the previous year's data for those same dates.\n",
    "yearly_temp = calc_temps('2016-08-23', '2017-08-23')\n",
    "yearly_temp"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 360x720 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Plot the results from your previous query as a bar chart. \n",
    "# Use \"Trip Avg Temp\" as your Title\n",
    "# Use the average temperature for the y value\n",
    "# Use the peak-to-peak (tmax-tmin) value as the y error bar (yerr)\n",
    "\n",
    "# Our Variables \n",
    "tmax = yearly_temp[0][2]\n",
    "tmin = yearly_temp[0][0]\n",
    "peak_to_peak = tmax - tmin # This will be our error line\n",
    "tavg = yearly_temp[0][1] # This will be the height of our graph \n",
    "\n",
    "# Our Plot\n",
    "fig, ax = plt.subplots(figsize = (5, 10)) # Create figure & axis objects \n",
    "ax.bar(x = 1, height = tavg, yerr = peak_to_peak/2, width = 0.4) # Plotting\n",
    "ax.set_xticks([1]) # Set only 1 tick \n",
    "ax.set_xticklabels([\"\"]) # \"Remove\" x-tick labels \n",
    "\n",
    "# Our \"Labels\"\n",
    "plt.title(\"Trip Avg Temp\")\n",
    "plt.ylabel(\"Temperature (F)\")\n",
    "plt.savefig(\"Images/Trip Avg Temp.png\")\n",
    "plt.tight_layout()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Station</th>\n",
       "      <th>Name</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "      <th>Elevation</th>\n",
       "      <th>Avg. Precipitation (in.)</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>USC00516128</td>\n",
       "      <td>MANOA LYON ARBO 785.2, HI US</td>\n",
       "      <td>21.33310</td>\n",
       "      <td>-157.80250</td>\n",
       "      <td>152.4</td>\n",
       "      <td>0.450640</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>USC00519281</td>\n",
       "      <td>WAIHEE 837.5, HI US</td>\n",
       "      <td>21.45167</td>\n",
       "      <td>-157.84889</td>\n",
       "      <td>32.9</td>\n",
       "      <td>0.198949</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>USC00513117</td>\n",
       "      <td>KANEOHE 838.1, HI US</td>\n",
       "      <td>21.42340</td>\n",
       "      <td>-157.80150</td>\n",
       "      <td>14.6</td>\n",
       "      <td>0.141429</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>USC00514830</td>\n",
       "      <td>KUALOA RANCH HEADQUARTERS 886.9, HI US</td>\n",
       "      <td>21.52130</td>\n",
       "      <td>-157.83740</td>\n",
       "      <td>7.0</td>\n",
       "      <td>0.125434</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>USC00519523</td>\n",
       "      <td>WAIMANALO EXPERIMENTAL FARM, HI US</td>\n",
       "      <td>21.33556</td>\n",
       "      <td>-157.71139</td>\n",
       "      <td>19.5</td>\n",
       "      <td>0.121051</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>USC00517948</td>\n",
       "      <td>PEARL CITY, HI US</td>\n",
       "      <td>21.39340</td>\n",
       "      <td>-157.97510</td>\n",
       "      <td>11.9</td>\n",
       "      <td>0.076500</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>USC00519397</td>\n",
       "      <td>WAIKIKI 717.2, HI US</td>\n",
       "      <td>21.27160</td>\n",
       "      <td>-157.81680</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0.044819</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       Station                                    Name  Latitude  Longitude  \\\n",
       "0  USC00516128            MANOA LYON ARBO 785.2, HI US  21.33310 -157.80250   \n",
       "1  USC00519281                     WAIHEE 837.5, HI US  21.45167 -157.84889   \n",
       "2  USC00513117                    KANEOHE 838.1, HI US  21.42340 -157.80150   \n",
       "3  USC00514830  KUALOA RANCH HEADQUARTERS 886.9, HI US  21.52130 -157.83740   \n",
       "4  USC00519523      WAIMANALO EXPERIMENTAL FARM, HI US  21.33556 -157.71139   \n",
       "5  USC00517948                       PEARL CITY, HI US  21.39340 -157.97510   \n",
       "6  USC00519397                    WAIKIKI 717.2, HI US  21.27160 -157.81680   \n",
       "\n",
       "   Elevation  Avg. Precipitation (in.)  \n",
       "0      152.4                  0.450640  \n",
       "1       32.9                  0.198949  \n",
       "2       14.6                  0.141429  \n",
       "3        7.0                  0.125434  \n",
       "4       19.5                  0.121051  \n",
       "5       11.9                  0.076500  \n",
       "6        3.0                  0.044819  "
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "\n",
    "# Calculate the rainfall per weather station for your trip dates using the previous year's matching dates.\n",
    "# Sort this in descending order by precipitation amount and list the station, name, latitude, longitude, and elevation\n",
    "avg_yearly_rainfall = session.query(Station.station, Station.name, Station.latitude, Station.longitude,\\\n",
    "                               Station.elevation, func.avg(Measurement.prcp)).\\\n",
    "        filter(Station.station == Measurement.station).\\\n",
    "        filter(Measurement.date >= '2016-08-23').\\\n",
    "        group_by(Station.station).order_by(func.avg(Measurement.prcp).desc()).all()\n",
    "pd.DataFrame(avg_yearly_rainfall, columns = ['Station', 'Name', 'Latitude', 'Longitude',  'Elevation', 'Avg. Precipitation (in.)'])\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Optional Challenge Assignment"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Create a query that will calculate the daily normals \n",
    "# (i.e. the averages for tmin, tmax, and tavg for all historic data matching a specific month and day)\n",
    "\n",
    "def daily_normals(date):\n",
    "    \"\"\"Daily Normals.\n",
    "    \n",
    "    Args:\n",
    "        date (str): A date string in the format '%m-%d'\n",
    "        \n",
    "    Returns:\n",
    "        A list of tuples containing the daily normals, tmin, tavg, and tmax\n",
    "    \n",
    "    \"\"\"\n",
    "    \n",
    "    sel = [func.min(Measurement.tobs), func.avg(Measurement.tobs), func.max(Measurement.tobs)]\n",
    "    return session.query(*sel).filter(func.strftime(\"%m-%d\", Measurement.date) == date).all()\n",
    "    \n",
    "daily_normals(\"01-01\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# calculate the daily normals for your trip\n",
    "# push each tuple of calculations into a list called `normals`\n",
    "\n",
    "# Set the start and end date of the trip\n",
    "\n",
    "# Use the start and end date to create a range of dates\n",
    "\n",
    "# Stip off the year and save a list of %m-%d strings\n",
    "\n",
    "# Loop through the list of %m-%d strings and calculate the normals for each date\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Load the previous query results into a Pandas DataFrame and add the `trip_dates` range as the `date` index\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Plot the daily normals as an area plot with `stacked=False`\n"
   ]
  }
 ],
 "metadata": {
  "kernel_info": {
   "name": "python3"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  },
  "nteract": {
   "version": "0.12.3"
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
